{"primaryContentSections":[{"kind":"content","content":[{"anchor":"overview","level":2,"type":"heading","text":"Overview"},{"style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"This migration guide is only applicable if you‚Äôre using RevenueCat in Custom Entitlements Computation mode. If that‚Äôs not the case, or you don‚Äôt know what that is, please use the regular "},{"type":"reference","isActive":true,"identifier":"V5_API_Migration_guide.md"},{"type":"text","text":"."}]}],"type":"aside","name":"Note"},{"anchor":"StoreKit-2","level":2,"type":"heading","text":"StoreKit 2"},{"style":"warning","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"When upgrading to v5, you "},{"type":"strong","inlineContent":[{"type":"text","text":"must"}]},{"type":"text","text":" configure your "},{"type":"reference","isActive":true,"identifier":"https:\/\/www.revenuecat.com\/docs\/service-credentials\/itunesconnect-app-specific-shared-secret\/in-app-purchase-key-configuration"},{"type":"text","text":" in the RevenueCat dashboard. "},{"type":"strong","inlineContent":[{"type":"text","text":"Purchases will fail if the key is not configured"}]},{"type":"text","text":"."}]}],"type":"aside","name":"Warning"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Version 5.0 of the RevenueCat SDK enables full StoreKit 2 flow on the SDK and the RevenueCat backend by default."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"We have been testing StoreKit 2 support in parallel to StoreKit 1 in our backend for a while and we believe it is ready for widespread use."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Here‚Äôs some of the benefits you get with StoreKit 2:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Better handling of a few specific edge cases which were unfixable with StoreKit 1:"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"No more ‚ÄúMissing receipt‚Äù errors in Sandbox that could result in failure restoring purchases or getting trial eligibility status ‚Äúunknown‚Äù."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"No more ‚ÄúThe purchased product was missing in the receipt‚Äù error that could cause an invalid receipt error when making a purchase."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Future proofing: StoreKit 1 APIs are being progressively deprecated by Apple, and new features are being added to StoreKit 2."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Faster processing time: More efficient and performant implementation of receipts validation. We have found that receipts validation can be ~200ms faster comparing to SK1 implementation for p95 of the requests."}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The SDK will automatically use StoreKit 1 in the following platforms where StoreKit 2 is not supported: on macOS 12 or earlier, iOS 15 or earlier, iPadOS 15 or earlier, tvOS 15 or earlier, or watchOS 8 or earlier."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"If you want to control the rollout of StoreKit 2, you can use the following configuration API. We recommend defaulting to "},{"type":"codeVoice","code":".storeKit1"},{"type":"text","text":", and using a remotely configured variable to control which percentage of your users receives "},{"type":"codeVoice","code":".storeKit2"},{"type":"text","text":"."}]},{"type":"codeListing","syntax":"swift","code":["Purchases.configure(with: .builder(withAPIKey: apiKey)","  .with(storeKitVersion: .storeKit1)","  .build())","","## Deployment Target","","The minimum targets have been raised to the following:","","- iOS 13.0","- tvOS 13.0","- watchOS 6.2","- macOS 10.15","","## Release Assets","","Pre-built `.frameworks` are no longer included in releases, only `.xcframeworks`: https:\/\/github.com\/RevenueCat\/purchases-ios\/pull\/3582","","## Breaking Changes","","- The scope of the View extension `onChangeOf` is changed from `public` to `internal`","  - This was never intended to be made public and to be used outside of the RevenueCat SDK"]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/revenuecat\/cec_v5_api_migration_guide"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/RevenueCat\/documentation\/RevenueCat\/CEC_V5_API_Migration_guide","interfaceLanguage":"swift"},"kind":"article","metadata":{"roleHeading":"Article","title":"RevenueCat Custom Entitlements Computation Mode 4.x to 5.x Migration Guide","role":"article","modules":[{"name":"RevenueCat"}]},"hierarchy":{"paths":[["doc:\/\/RevenueCat\/documentation\/RevenueCat"]]},"references":{"V5_API_Migration_guide.md":{"title":"4.x to 5.x Migration guide","titleInlineContent":[{"type":"text","text":"4.x to 5.x Migration guide"}],"type":"link","identifier":"V5_API_Migration_guide.md","url":"V5_API_Migration_guide.md"},"https://www.revenuecat.com/docs/service-credentials/itunesconnect-app-specific-shared-secret/in-app-purchase-key-configuration":{"title":"In-App Purchase Key","titleInlineContent":[{"type":"text","text":"In-App Purchase Key"}],"type":"link","identifier":"https:\/\/www.revenuecat.com\/docs\/service-credentials\/itunesconnect-app-specific-shared-secret\/in-app-purchase-key-configuration","url":"https:\/\/www.revenuecat.com\/docs\/service-credentials\/itunesconnect-app-specific-shared-secret\/in-app-purchase-key-configuration"},"doc://RevenueCat/documentation/RevenueCat":{"role":"collection","title":"RevenueCat","abstract":[{"type":"text","text":"üòª In-App Subscriptions Made Easy üòª"}],"identifier":"doc:\/\/RevenueCat\/documentation\/RevenueCat","kind":"symbol","type":"topic","url":"\/documentation\/revenuecat"}}}