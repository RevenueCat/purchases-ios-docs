{"primaryContentSections":[{"kind":"declarations","declarations":[{"tokens":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"recordPurchase"},{"kind":"text","text":"("},{"kind":"externalParam","text":"_"},{"kind":"text","text":" "},{"kind":"internalParam","text":"purchaseResult"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Product","preciseIdentifier":"s:8StoreKit7ProductV"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"PurchaseResult","preciseIdentifier":"s:8StoreKit7ProductV14PurchaseResultO"},{"kind":"text","text":") "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","identifier":"doc:\/\/RevenueCat\/documentation\/RevenueCat\/StoreTransaction","preciseIdentifier":"c:@M@RevenueCat@objc(cs)RCStoreTransaction","text":"StoreTransaction"},{"kind":"text","text":"?"}],"languages":["swift"],"platforms":["macOS"]},{"tokens":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"recordPurchase"},{"kind":"text","text":"("},{"kind":"externalParam","text":"_"},{"kind":"text","text":" "},{"kind":"internalParam","text":"purchaseResult"},{"kind":"text","text":": StoreKit"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Product","preciseIdentifier":"s:8StoreKit7ProductV"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"PurchaseResult","preciseIdentifier":"s:8StoreKit7ProductV14PurchaseResultO"},{"kind":"text","text":") "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","identifier":"doc:\/\/RevenueCat\/documentation\/RevenueCat\/StoreTransaction","preciseIdentifier":"c:@M@RevenueCat@objc(cs)RCStoreTransaction","text":"StoreTransaction"},{"kind":"text","text":"?"}],"languages":["swift"],"platforms":["iOS"]}]},{"kind":"parameters","parameters":[{"name":"purchaseResult","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"codeVoice","code":"StoreKit.Product.PurchaseResult"},{"type":"text","text":" of the product that was just purchased."}]}]}]},{"kind":"content","content":[{"anchor":"return-value","level":2,"type":"heading","text":"Return Value"},{"type":"paragraph","inlineContent":[{"type":"text","text":"A "},{"type":"reference","isActive":true,"identifier":"doc:\/\/RevenueCat\/documentation\/RevenueCat\/StoreTransaction"},{"type":"text","text":" if there was a transacton found and handled for the provided product ID."}]}]},{"kind":"content","content":[{"anchor":"discussion","level":2,"type":"heading","text":"Discussion"},{"type":"paragraph","inlineContent":[{"type":"text","text":"You only need to use this method with "},{"type":"emphasis","inlineContent":[{"type":"text","text":"new"}]},{"type":"text","text":" purchases. Subscription updates are observed automatically."}]},{"anchor":"Example","level":4,"type":"heading","text":"Example:"},{"type":"codeListing","syntax":"swift","code":["\/\/ Fetch and purchase the product","let product = try await StoreKit.Product.products(for: [\"my_product_id\"]).first","guard let product = product else { return }","let result = try await product.purchase()","\/\/ Let RevenueCat handle the transaction result","_ = try await Purchases.shared.recordPurchase(result)","\/\/ Handle the result and finish the transaction","switch result {","case .success(let verification):","    switch verification {","    case .unverified(_, _):","        break","    case .verified(let transaction):","        \/\/ If the purchase was successful and verified, finish the transaction","        await transaction.finish()","    }","case .userCancelled:","    break","case .pending:","    break","@unknown default:","    break","}"]},{"style":"warning","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"You need to finish the transaction yourself after calling this method."}]}],"type":"aside","name":"Warning"},{"style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"An error of type "},{"type":"reference","isActive":true,"identifier":"doc:\/\/RevenueCat\/documentation\/RevenueCat\/ErrorCode"},{"type":"text","text":" is thrown if a failure occurs while handling the purchase."}]}],"type":"aside","name":"Throws"},{"style":"important","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"This should only be used if you are processing transactions directly within your app, configuring"},{"type":"text","text":" "},{"type":"text","text":"the SDK by passing "},{"type":"reference","isActive":true,"identifier":"doc:\/\/RevenueCat\/documentation\/RevenueCat\/PurchasesAreCompletedBy\/myApp"},{"type":"text","text":" to "},{"type":"codeVoice","code":"purchasesAreCompletedBy"},{"type":"text","text":": in"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"doc:\/\/RevenueCat\/documentation\/RevenueCat\/Configuration\/Builder\/with(purchasesAreCompletedBy:storeKitVersion:)"}]}],"type":"aside","name":"Important"}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/revenuecat\/purchases\/recordpurchase(_:)"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/RevenueCat\/documentation\/RevenueCat\/Purchases\/recordPurchase(_:)","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Use this method only if you already have your own IAP implementation using StoreKit 2 and want to use"},{"type":"text","text":" "},{"type":"text","text":"RevenueCatâ€™s backend. If you are using StoreKit 1 for your implementation, you do not need this method."}],"kind":"symbol","metadata":{"modules":[{"name":"RevenueCat"}],"role":"symbol","title":"recordPurchase(_:)","roleHeading":"Instance Method","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"recordPurchase"},{"kind":"text","text":"(StoreKit"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Product","preciseIdentifier":"s:8StoreKit7ProductV"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"PurchaseResult","preciseIdentifier":"s:8StoreKit7ProductV14PurchaseResultO"},{"kind":"text","text":") "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"StoreTransaction","preciseIdentifier":"c:@M@RevenueCat@objc(cs)RCStoreTransaction"},{"kind":"text","text":"?"}],"symbolKind":"method","externalID":"s:10RevenueCat9PurchasesC14recordPurchaseyAA16StoreTransactionCSg0F3Kit7ProductV0E6ResultOYaKF","extendedModule":"RevenueCat","platforms":[{"beta":false,"unavailable":false,"name":"iOS","introducedAt":"15.0","deprecated":false},{"beta":false,"unavailable":false,"name":"macOS","introducedAt":"12.0","deprecated":false},{"beta":false,"unavailable":false,"name":"tvOS","introducedAt":"15.0","deprecated":false},{"beta":false,"unavailable":false,"name":"watchOS","introducedAt":"8.0","deprecated":false}]},"hierarchy":{"paths":[["doc:\/\/RevenueCat\/documentation\/RevenueCat","doc:\/\/RevenueCat\/documentation\/RevenueCat\/Purchases","doc:\/\/RevenueCat\/documentation\/RevenueCat\/Purchases\/PurchasesSwiftType-Implementations"]]},"references":{"doc://RevenueCat/documentation/RevenueCat":{"role":"collection","title":"RevenueCat","abstract":[{"type":"text","text":"ðŸ˜» In-App Subscriptions Made Easy ðŸ˜»"}],"identifier":"doc:\/\/RevenueCat\/documentation\/RevenueCat","kind":"symbol","type":"topic","url":"\/documentation\/revenuecat"},"doc://RevenueCat/documentation/RevenueCat/Configuration/Builder/with(purchasesAreCompletedBy:storeKitVersion:)":{"role":"symbol","title":"with(purchasesAreCompletedBy:storeKitVersion:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"with"},{"kind":"text","text":"("},{"kind":"externalParam","text":"purchasesAreCompletedBy"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"PurchasesAreCompletedBy","preciseIdentifier":"c:@M@RevenueCat@E@RCPurchasesAreCompletedBy"},{"kind":"text","text":", "},{"kind":"externalParam","text":"storeKitVersion"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"StoreKitVersion","preciseIdentifier":"c:@M@RevenueCat@E@RCStoreKitVersion"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"Configuration","preciseIdentifier":"c:@M@RevenueCat@objc(cs)RCConfiguration"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Builder","preciseIdentifier":"s:10RevenueCat13ConfigurationC7BuilderC"}],"abstract":[{"type":"text","text":"Set "},{"type":"codeVoice","code":"purchasesAreCompletedBy"},{"type":"text","text":"."}],"identifier":"doc:\/\/RevenueCat\/documentation\/RevenueCat\/Configuration\/Builder\/with(purchasesAreCompletedBy:storeKitVersion:)","kind":"symbol","type":"topic","url":"\/documentation\/revenuecat\/configuration\/builder\/with(purchasesarecompletedby:storekitversion:)"},"doc://RevenueCat/documentation/RevenueCat/PurchasesAreCompletedBy/myApp":{"role":"symbol","title":"PurchasesAreCompletedBy.myApp","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"myApp"}],"abstract":[{"type":"text","text":"Purchase transactions are to be finished by your app."}],"identifier":"doc:\/\/RevenueCat\/documentation\/RevenueCat\/PurchasesAreCompletedBy\/myApp","kind":"symbol","type":"topic","url":"\/documentation\/revenuecat\/purchasesarecompletedby\/myapp"},"doc://RevenueCat/documentation/RevenueCat/Purchases/PurchasesSwiftType-Implementations":{"role":"collectionGroup","title":"PurchasesSwiftType Implementations","abstract":[],"identifier":"doc:\/\/RevenueCat\/documentation\/RevenueCat\/Purchases\/PurchasesSwiftType-Implementations","kind":"article","type":"topic","url":"\/documentation\/revenuecat\/purchases\/purchasesswifttype-implementations"},"doc://RevenueCat/documentation/RevenueCat/ErrorCode":{"role":"symbol","title":"ErrorCode","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"ErrorCode"}],"abstract":[{"type":"text","text":"Error codes used by the Purchases SDK"}],"identifier":"doc:\/\/RevenueCat\/documentation\/RevenueCat\/ErrorCode","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ErrorCode"}],"url":"\/documentation\/revenuecat\/errorcode"},"doc://RevenueCat/documentation/RevenueCat/Purchases/recordPurchase(_:)":{"role":"symbol","title":"recordPurchase(_:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"recordPurchase"},{"kind":"text","text":"(StoreKit"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Product","preciseIdentifier":"s:8StoreKit7ProductV"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"PurchaseResult","preciseIdentifier":"s:8StoreKit7ProductV14PurchaseResultO"},{"kind":"text","text":") "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"StoreTransaction","preciseIdentifier":"c:@M@RevenueCat@objc(cs)RCStoreTransaction"},{"kind":"text","text":"?"}],"abstract":[{"type":"text","text":"Use this method only if you already have your own IAP implementation using StoreKit 2 and want to use"},{"type":"text","text":" "},{"type":"text","text":"RevenueCatâ€™s backend. If you are using StoreKit 1 for your implementation, you do not need this method."}],"identifier":"doc:\/\/RevenueCat\/documentation\/RevenueCat\/Purchases\/recordPurchase(_:)","kind":"symbol","type":"topic","url":"\/documentation\/revenuecat\/purchases\/recordpurchase(_:)"},"doc://RevenueCat/documentation/RevenueCat/StoreTransaction":{"role":"symbol","title":"StoreTransaction","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"StoreTransaction"}],"abstract":[{"type":"text","text":"Abstract class that provides access to properties of a transaction."},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"doc:\/\/RevenueCat\/documentation\/RevenueCat\/StoreTransaction"},{"type":"text","text":"s can represent transactions from StoreKit 1, StoreKit 2 or"},{"type":"text","text":" "},{"type":"text","text":"transactions made from other places, like Stripe, Google Play or Amazon Store."}],"identifier":"doc:\/\/RevenueCat\/documentation\/RevenueCat\/StoreTransaction","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"StoreTransaction"}],"url":"\/documentation\/revenuecat\/storetransaction"},"doc://RevenueCat/documentation/RevenueCat/Purchases":{"role":"symbol","title":"Purchases","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"Purchases"}],"abstract":[{"type":"reference","isActive":true,"identifier":"doc:\/\/RevenueCat\/documentation\/RevenueCat\/Purchases"},{"type":"text","text":" is the main entry point of the "},{"type":"codeVoice","code":"RevenueCat"},{"type":"text","text":" SDK."},{"type":"text","text":" "},{"type":"text","text":"It provides access to all its features."}],"identifier":"doc:\/\/RevenueCat\/documentation\/RevenueCat\/Purchases","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Purchases"}],"url":"\/documentation\/revenuecat\/purchases"}}}