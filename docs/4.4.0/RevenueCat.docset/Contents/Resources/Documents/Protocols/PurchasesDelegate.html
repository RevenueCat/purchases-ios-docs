<!DOCTYPE html>
<html lang="en">
  <head>
    <title>PurchasesDelegate Protocol Reference</title>
    <link rel="stylesheet" type="text/css" href="../css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="../css/highlight.css" />
    <meta charset='utf-8'>
    <script src="../js/jquery.min.js" defer></script>
    <script src="../js/jazzy.js" defer></script>
    
    <script src="../js/lunr.min.js" defer></script>
    <script src="../js/typeahead.jquery.js" defer></script>
    <script src="../js/jazzy.search.js" defer></script>
  </head>
  <body>
    <a name="//apple_ref/swift/Protocol/PurchasesDelegate" class="dashAnchor"></a>
    <a title="PurchasesDelegate Protocol Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="../index.html">RevenueCat 4.4.0 Docs</a> (82% documented)</p>
        <p class="header-right"><a href="https://github.com/revenuecat/purchases-ios"><img src="../img/gh.png" alt="GitHub"/>View on GitHub</a></p>
        <div class="header-right">
          <form role="search" action="../search.json">
            <input type="text" placeholder="Search documentation" data-typeahead>
          </form>
        </div>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="../index.html">RevenueCat Reference</a>
        <img id="carat" src="../img/carat.png" alt=""/>
        PurchasesDelegate Protocol Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="../Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Classes/Configuration.html">Configuration</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/Configuration/Builder.html">– Builder</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/CustomerInfo.html">CustomerInfo</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/DangerousSettings.html">DangerousSettings</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/EntitlementInfo.html">EntitlementInfo</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/EntitlementInfos.html">EntitlementInfos</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/IntroEligibility.html">IntroEligibility</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/Offering.html">Offering</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/Offerings.html">Offerings</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/Package.html">Package</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/PromotionalOffer.html">PromotionalOffer</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/PromotionalOffer/SignedData.html">– SignedData</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/Purchases.html">Purchases</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/Purchases/PlatformInfo.html">– PlatformInfo</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/StoreProduct.html">StoreProduct</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/StoreProduct/ProductCategory.html">– ProductCategory</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/StoreProduct/ProductType.html">– ProductType</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/StoreProductDiscount.html">StoreProductDiscount</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/StoreProductDiscount/PaymentMode.html">– PaymentMode</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/StoreProductDiscount/DiscountType.html">– DiscountType</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/StoreProductDiscount.html#/s:10RevenueCat20StoreProductDiscountC4DataV">– Data</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/StoreTransaction.html">StoreTransaction</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/Storefront.html">Storefront</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/SubscriptionPeriod.html">SubscriptionPeriod</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/SubscriptionPeriod/Unit.html">– Unit</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Enums/AttributionNetwork.html">AttributionNetwork</a>
              </li>
              <li class="nav-group-task">
                <a href="../Enums/ErrorCode.html">ErrorCode</a>
              </li>
              <li class="nav-group-task">
                <a href="../Enums/IntroEligibilityStatus.html">IntroEligibilityStatus</a>
              </li>
              <li class="nav-group-task">
                <a href="../Enums/LogLevel.html">LogLevel</a>
              </li>
              <li class="nav-group-task">
                <a href="../Enums/PackageType.html">PackageType</a>
              </li>
              <li class="nav-group-task">
                <a href="../Enums/PeriodType.html">PeriodType</a>
              </li>
              <li class="nav-group-task">
                <a href="../Enums/PurchaseOwnershipType.html">PurchaseOwnershipType</a>
              </li>
              <li class="nav-group-task">
                <a href="../Enums/RefundRequestStatus.html">RefundRequestStatus</a>
              </li>
              <li class="nav-group-task">
                <a href="../Enums/Store.html">Store</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Extensions.html#/ETagManager">ETagManager</a>
              </li>
              <li class="nav-group-task">
                <a href="../Extensions.html#/HTTPRequest">HTTPRequest</a>
              </li>
              <li class="nav-group-task">
                <a href="../Extensions.html#/ManageSubscriptionsHelper">ManageSubscriptionsHelper</a>
              </li>
              <li class="nav-group-task">
                <a href="../Extensions.html#/OfferingsManager">OfferingsManager</a>
              </li>
              <li class="nav-group-task">
                <a href="../Extensions.html#/PostReceiptDataOperation">PostReceiptDataOperation</a>
              </li>
              <li class="nav-group-task">
                <a href="../Extensions.html#/Product">Product</a>
              </li>
              <li class="nav-group-task">
                <a href="../Extensions.html#/ProductsFetcherSK2">ProductsFetcherSK2</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Protocols/PurchasesDelegate.html">PurchasesDelegate</a>
              </li>
              <li class="nav-group-task">
                <a href="../Protocols/RawDataContainer.html">RawDataContainer</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Typealiases.html">Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Typealiases.html#/s:10RevenueCat10LogHandlera">LogHandler</a>
              </li>
              <li class="nav-group-task">
                <a href="../Typealiases.html#/s:10RevenueCat22PurchaseCompletedBlocka">PurchaseCompletedBlock</a>
              </li>
              <li class="nav-group-task">
                <a href="../Typealiases.html#/s:10RevenueCat18PurchaseResultDataa">PurchaseResultData</a>
              </li>
              <li class="nav-group-task">
                <a href="../Typealiases.html#/s:10RevenueCat10SK1Producta">SK1Product</a>
              </li>
              <li class="nav-group-task">
                <a href="../Typealiases.html#/s:10RevenueCat18SK1ProductDiscounta">SK1ProductDiscount</a>
              </li>
              <li class="nav-group-task">
                <a href="../Typealiases.html#/s:10RevenueCat14SK1Transactiona">SK1Transaction</a>
              </li>
              <li class="nav-group-task">
                <a href="../Typealiases.html#/s:10RevenueCat10SK2Producta">SK2Product</a>
              </li>
              <li class="nav-group-task">
                <a href="../Typealiases.html#/s:10RevenueCat18SK2ProductDiscounta">SK2ProductDiscount</a>
              </li>
              <li class="nav-group-task">
                <a href="../Typealiases.html#/s:10RevenueCat14SK2Transactiona">SK2Transaction</a>
              </li>
              <li class="nav-group-task">
                <a href="../Typealiases.html#/s:10RevenueCat18StartPurchaseBlocka">StartPurchaseBlock</a>
              </li>
              <li class="nav-group-task">
                <a href="../Typealiases.html#/s:10RevenueCat17VerboseLogHandlera">VerboseLogHandler</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            <h1>PurchasesDelegate</h1>
              <div class="declaration">
                <div class="language">
                  
                  <pre class="highlight swift"><code><span class="kd">@objc(RCPurchasesDelegate)</span>
<span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">PurchasesDelegate</span> <span class="p">:</span> <span class="kt">NSObjectProtocol</span></code></pre>

                </div>
              </div>
            <p>Delegate for <code><a href="../Classes/Purchases.html">Purchases</a></code> responsible for handling updating your app&rsquo;s state in response to updated customer info
 or promotional product purchases.</p>
<div class="aside aside-note">
    <p class="aside-title">Note</p>
    Delegate methods can be called at any time after the <code>delegate</code> is set, not just in response to
<code>customerInfo:</code> calls. Ensure your app is capable of handling these calls at anytime if <code>delegate</code> is set.

</div>

              <div class="slightly-smaller">
                <a href="https://github.com/RevenueCat/purchases-ios/tree/4.4.0/Sources/Purchasing/PurchasesDelegate.swift#L24-L99">Show on GitHub</a>
              </div>
          </section>
          <section class="section task-group-section">
            <div class="task-group">
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/c:@M@RevenueCat@objc(pl)RCPurchasesDelegate(im)purchases:receivedUpdatedCustomerInfo:"></a>
                    <a name="//apple_ref/swift/Method/purchases(_:receivedUpdated:)" class="dashAnchor"></a>
                    <a class="token" href="#/c:@M@RevenueCat@objc(pl)RCPurchasesDelegate(im)purchases:receivedUpdatedCustomerInfo:">purchases(_:<wbr>receivedUpdated:<wbr>)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Called whenever <code><a href="../Classes/Purchases.html">Purchases</a></code> receives updated customer info. This may happen periodically
throughout the life of the app if new information becomes available (e.g. UIApplicationDidBecomeActive).*</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">@objc(purchases:receivedUpdatedCustomerInfo:)</span>
<span class="kd">optional</span> <span class="kd">func</span> <span class="nf">purchases</span><span class="p">(</span><span class="n">_</span> <span class="nv">purchases</span><span class="p">:</span> <span class="kt"><a href="../Classes/Purchases.html">Purchases</a></span><span class="p">,</span> <span class="n">receivedUpdated</span> <span class="nv">customerInfo</span><span class="p">:</span> <span class="kt"><a href="../Classes/CustomerInfo.html">CustomerInfo</a></span><span class="p">)</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>purchases</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>Related <code><a href="../Classes/Purchases.html">Purchases</a></code> object</p>
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>customerInfo</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>Updated <code><a href="../Classes/CustomerInfo.html">CustomerInfo</a></code></p>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/RevenueCat/purchases-ios/tree/4.4.0/Sources/Purchasing/PurchasesDelegate.swift#L45">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/c:@M@RevenueCat@objc(pl)RCPurchasesDelegate(im)purchases:readyForPromotedProduct:purchase:"></a>
                    <a name="//apple_ref/swift/Method/purchases(_:readyForPromotedProduct:purchase:)" class="dashAnchor"></a>
                    <a class="token" href="#/c:@M@RevenueCat@objc(pl)RCPurchasesDelegate(im)purchases:readyForPromotedProduct:purchase:">purchases(_:<wbr>readyForPromotedProduct:<wbr>purchase:<wbr>)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Called when a user initiates a promotional in-app purchase from the App Store.
 If your app is able to handle a purchase at the current time, run the deferment block in this method.
 If the app is not in a state to make a purchase: cache the <code>startPurchase</code> block,
 then call the <code>startPurchase</code> block when the app is ready to make the promotional purchase.</p>

<p>If the purchase should never be made, you don&rsquo;t need to ever call the block and
 <code><a href="../Classes/Purchases.html">Purchases</a></code> will not proceed with the promotional purchase.</p>

<p>This can be tested by opening a link like:
 itms-services://?action=purchaseIntent&amp;bundleId=<BUNDLE_ID>&amp;productIdentifier=<SKPRODUCT_ID></p>

<p>### Related Articles:</p>

<ul>
<li><a href="https://rev.cat/testing-promoted-in-app-purchases">Apple Documentation</a></li>
</ul>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">@objc</span>
<span class="kd">optional</span> <span class="kd">func</span> <span class="nf">purchases</span><span class="p">(</span><span class="n">_</span> <span class="nv">purchases</span><span class="p">:</span> <span class="kt"><a href="../Classes/Purchases.html">Purchases</a></span><span class="p">,</span>
                        <span class="n">readyForPromotedProduct</span> <span class="nv">product</span><span class="p">:</span> <span class="kt"><a href="../Classes/StoreProduct.html">StoreProduct</a></span><span class="p">,</span>
                        <span class="n">purchase</span> <span class="nv">startPurchase</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="kt"><a href="../Typealiases.html#/s:10RevenueCat18StartPurchaseBlocka">StartPurchaseBlock</a></span><span class="p">)</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>product</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p><code><a href="../Classes/StoreProduct.html">StoreProduct</a></code> the product that was selected from the app store</p>
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>startPurchase</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>call this block when the app is ready to handle the purchase</p>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/RevenueCat/purchases-ios/tree/4.4.0/Sources/Purchasing/PurchasesDelegate.swift#L65">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/c:@M@RevenueCat@objc(pl)RCPurchasesDelegate(py)shouldShowPriceConsent"></a>
                    <a name="//apple_ref/swift/Property/shouldShowPriceConsent" class="dashAnchor"></a>
                    <a class="token" href="#/c:@M@RevenueCat@objc(pl)RCPurchasesDelegate(py)shouldShowPriceConsent">shouldShowPriceConsent</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>The default return value for this optional method is true. By default, the system displays the price consent
 sheet when you increase the subscription price in App Store Connect and the subscriber hasn’t yet taken action.</p>

<p>The system calls your delegate’s method, if appropriate, when RevenueCat starts observing the <code>SKPaymentQueue</code>,
 and any time the app comes to foreground.</p>

<p>If you return false, the system won’t show the price consent sheet. You can choose to display it later by
 calling <code><a href="../Classes/Purchases.html#/c:@CM@RevenueCat@objc(cs)RCPurchases(im)showPriceConsentIfNeeded">showPriceConsentIfNeeded()</a></code>.
 You may want to delay showing the sheet if it would interrupt your user’s interaction in your app.</p>

<p>### Related Articles</p>

<ul>
<li><a href="https://rev.cat/testing-promoted-in-app-purchases">Apple Documentation</a></li>
</ul>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">@available(iOS 13.4, *)</span>
<span class="kd">@available(macOS, unavailable)</span>
<span class="kd">@available(tvOS, unavailable)</span>
<span class="kd">@available(watchOS, unavailable)</span>
<span class="kd">@objc</span>
<span class="kd">optional</span> <span class="k">var</span> <span class="nv">shouldShowPriceConsent</span><span class="p">:</span> <span class="kt">Bool</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/RevenueCat/purchases-ios/tree/4.4.0/Sources/Purchasing/PurchasesDelegate.swift#L97">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
          </section>
        </section>
        <section id="footer">
          <p>&copy; 2022 <a class="link" href="https://revenuecat.com" target="_blank" rel="external noopener">RevenueCat</a>. All rights reserved. (Last updated: 2022-05-27)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external noopener">jazzy ♪♫ v0.14.2</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external noopener">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</html>
